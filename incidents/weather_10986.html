<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Context: Ifenmulde / Hirschegg</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⛷️</text></svg>">
    <link rel="stylesheet" href="../styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .chart-container { position: relative; height: 400px; width: 100%; margin-bottom: 2rem; }
        .weather-text { background: #f9f9f9; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; }
        .meta-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
        .meta-item { background: white; padding: 1rem; border-radius: 4px; border: 1px solid #eee; }
        .meta-label { font-size: 0.85rem; color: #666; text-transform: uppercase; letter-spacing: 0.05em; }
        .meta-value { font-size: 1.1rem; font-weight: 600; color: #333; margin-top: 0.25rem; }
    </style>
</head>
<body>
    <div class="container">
        <header><div class="header-content"><a href="../index.html" class="logo">Skitour Allgäu</a><div class="date-nav"><span>Weather Context</span></div></div></header>
        <div style="margin-bottom:1rem;"><a href="index.html">&larr; Back to Incidents</a></div>
        
        <h1>Weather Context</h1>
        <h2 style="color: #666;">Ifenmulde / Hirschegg - 2024-12-15 10:38:00</h2>

        <div class="weather-text">
            <h3>Weather Report (2024-12-15 10:38:00)</h3>
            <p style="white-space: pre-line;">On 14 December 2024, temperatures showed a rising trend, averaging around 0.5 °C after a cold start near –4 °C. Snowfall was intermittent, totaling about 3.4 mm water equivalent, mainly in the afternoon and evening. Snow depth remained nearly unchanged, fluctuating only slightly around 0.40–0.43 m, indicating minimal accumulation. Winds were light to moderate, averaging 4.8 km/h, shifting from southerly to westerly directions. Total precipitation reached around 3.8 mm, consistent with light convective snow showers.
Source: Open‑Meteo Historical Forecast API.</p>
            
        </div>

        <h3>Station Data: Fellhorn (1967m) (9.1km away)</h3>
        <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">Data from previous 48hrs leading up to incident.</p>
        
        <div class="chart-container">
            <canvas id="weatherChart"></canvas>
        </div>

        <script>
            const ctx = document.getElementById('weatherChart').getContext('2d');
            const data = [];
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => new Date(d.TS).toLocaleString('de-DE', { day: '2-digit', hour: '2-digit', minute: '2-digit' })),
                    datasets: [
                        {
                            label: 'Snow Height (cm)',
                            data: data.map(d => d.HS),
                            borderColor: '#3498db',
                            yAxisID: 'y',
                        },
                        {
                            label: 'Air Temp (°C)',
                            data: data.map(d => d.TL),
                            borderColor: '#e74c3c',
                            yAxisID: 'y1',
                        },
                        {
                            label: 'Wind Speed (km/h)',
                            data: data.map(d => d.ff ? d.ff * 3.6 : null), // m/s to km/h
                            borderColor: '#2ecc71',
                            yAxisID: 'y',
                            hidden: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    interaction: { mode: 'index', intersect: false },
                    scales: {
                        y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Snow (cm) / Wind (km/h)' } },
                        y1: { type: 'linear', display: true, position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Temperature (°C)' } }
                    }
                }
            });
        </script>
    </div>
</body>
</html>